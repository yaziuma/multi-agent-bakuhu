{%- macro render_tree(items) -%}
<ul class="tree-items">
{%- for item in items -%}
  {%- if item.is_dir -%}
    <li class="tree-folder">
      {%- if item.children -%}
        <details class="tree-folder-details" open>
          <summary class="tree-folder-summary">
            <span class="tree-icon">ğŸ“</span>
            <span class="tree-name">{{ item.name }}/</span>
          </summary>
          {{ render_tree(item.children) }}
        </details>
      {%- else -%}
        <span class="tree-icon">ğŸ“</span>
        <span class="tree-name">{{ item.name }}/</span>
      {%- endif -%}
    </li>
  {%- else -%}
    <li class="tree-file">
      <span class="tree-icon">ğŸ“„</span>
      <a href="{{ base_path }}/file/{{ item.path }}" class="tree-link">{{ item.name }}</a>
    </li>
  {%- endif -%}
{%- endfor -%}
</ul>
{%- endmacro -%}

{%- if tree -%}
  {{- render_tree(tree) -}}
{%- else -%}
  <p class="no-results">ğŸ” æ¤œç´¢çµæœãªã— (query: "{{ query }}")</p>
{%- endif -%}
